
-- Table: CUSTOMER
CREATE TABLE CUSTOMER (
    CUST_NO VARCHAR(6) PRIMARY KEY CHECK (LENGTH(CUST_NO) = 6 AND SUBSTR(CUST_NO, 1, 1) IN ('A', 'B', 'C', 'D', 'E')),
    NAME VARCHAR(20) NOT NULL,
    PHONE_NO VARCHAR(10),
    CITY VARCHAR(15) NOT NULL
);

-- Table: ACCOUNT
CREATE TABLE ACCOUNT (
    ACCOUNT_NO VARCHAR(8) PRIMARY KEY CHECK (LENGTH(ACCOUNT_NO) = 8 AND SUBSTR(ACCOUNT_NO, 7, 2) = 'CA'),
    TYPE VARCHAR(10) CHECK (TYPE IN ('SAVINGS', 'CURRENT', 'RD', 'FD')),
    BALANCE DECIMAL(10, 2) CHECK (BALANCE >= 1000),
    BRANCH_CODE VARCHAR(6),
    FOREIGN KEY (BRANCH_CODE) REFERENCES BRANCH(BRANCH_CODE)
);

-- Table: DEPOSITOR
CREATE TABLE DEPOSITOR (
    CUST_NO VARCHAR(6),
    ACCOUNT_NO VARCHAR(8),
    PRIMARY KEY (CUST_NO, ACCOUNT_NO),
    FOREIGN KEY (CUST_NO) REFERENCES CUSTOMER(CUST_NO),
    FOREIGN KEY (ACCOUNT_NO) REFERENCES ACCOUNT(ACCOUNT_NO)
);

-- Table: LOAN
CREATE TABLE LOAN (
    LOAN_NO VARCHAR(6) PRIMARY KEY CHECK (LENGTH(LOAN_NO) = 6 AND SUBSTR(LOAN_NO, 1, 1) = 'L'),
    CUST_NO VARCHAR(6),
    AMOUNT DECIMAL(10, 2) CHECK (AMOUNT > 1000),
    BRANCH_CODE VARCHAR(6),
    FOREIGN KEY (CUST_NO) REFERENCES CUSTOMER(CUST_NO),
    FOREIGN KEY (BRANCH_CODE) REFERENCES BRANCH(BRANCH_CODE)
);

-- Table: BRANCH
CREATE TABLE BRANCH (
    BRANCH_CODE VARCHAR(6) PRIMARY KEY,
    BRANCH_NAME VARCHAR(20) NOT NULL,
    BRANCH_CITY VARCHAR(20) NOT NULL CHECK (BRANCH_CITY IN ('DELHI','MUMBAI', 'KOLKATA', 'CHENNAI'))
);

-- Table: INSTALLMENT
CREATE TABLE INSTALLMENT (
    INST_NO INT PRIMARY KEY CHECK (INST_NO BETWEEN 1 AND 10),
    LOAN_NO VARCHAR(6),
    INST_AMOUNT DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (LOAN_NO) REFERENCES LOAN(LOAN_NO)
);
